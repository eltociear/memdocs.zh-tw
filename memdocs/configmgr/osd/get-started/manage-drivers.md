---
title: 管理驅動程式
titleSuffix: Configuration Manager
description: 使用 Configuration Manager 驅動程式類別目錄匯入裝置驅動程式、將驅動程式分組成不同套件，再將這些套件發佈至發佈點。
ms.date: 07/26/2019
ms.prod: configuration-manager
ms.technology: configmgr-osd
ms.topic: conceptual
ms.assetid: 84802d55-112e-4f7f-9a48-74a80d91a0f4
author: aczechowski
ms.author: aaroncz
manager: dougeby
ms.openlocfilehash: 8fffa72e45f2f9e063fb0072882c2a5278694cee
ms.sourcegitcommit: bbf820c35414bf2cba356f30fe047c1a34c5384d
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/21/2020
ms.locfileid: "81708896"
---
# <a name="manage-drivers-in-configuration-manager"></a>在 Configuration Manager 中管理驅動程式

適用於：  Configuration Manager (最新分支)

Configuration Manager 提供驅動程式類別目錄，讓您可以用於管理 Configuration Manager 環境中的 Windows 裝置驅動程式。 使用驅動程式類別目錄將裝置驅動程式匯入 Configuration Manager，以將驅動程式分組成不同套件，再將那些套件發佈至發佈點。 當您在目的地電腦上安裝完整 OS，或者是使用開機映像中的 Windows PE 時，皆可使用裝置驅動程式。 Windows 裝置程式包含安裝資訊檔案 (INF) 及支援該裝置所需的所有其他檔案。 當您部署 OS 時，Configuration Manager 會自裝置的 INF 檔案取得該裝置的硬體和平台資訊。 



## <a name="driver-categories"></a><a name="BKMK_DriverCategories"></a> 驅動程式類別

匯入裝置驅動程式時，您可以將裝置驅動程式指派至類別。 裝置驅動程式類別有助於將您所使用的類似裝置驅動程式依照驅動程式類別目錄進行分組。 例如，將所有網路介面卡裝置驅動程式設定至特定類別。 然後，當您建立包含 [[自動套用驅動程式](../understand/task-sequence-steps.md#BKMK_AutoApplyDrivers)] 步驟的工作順序時，指定裝置驅動程式的類別。 Configuration Manager 接著會掃描硬體，並從該類別選取適用的驅動程式，佈置到系統上供 Windows 安裝程式使用。  



## <a name="driver-packages"></a><a name="BKMK_ManagingDriverPackages"></a> 驅動程式套件

將套件中類似的裝置驅動程式分組，以協助簡化 OS 部署。 例如，針對您網路上的每個電腦製造商建立驅動程式套件。 在將驅動程式匯入驅動程式類別目錄時，您可以直接在 [驅動程式套件]  節點中建立驅動程式套件。 建立驅動程式套件之後，便可以將它散發到發佈點。 之後，Configuration Manager 用戶端電腦便可以依需求安裝驅動程式。 

請考慮下列幾點：  

- 當您建立驅動程式套件時，套件來源位置必須指向未由其他驅動程式套件使用的空網路共用。 SMS 提供者必須擁有控制該位置的**完整權限**。  

- 當您將裝置驅動程式新增至驅動程式套件時，Configuration Manager 會將它複製到套件來源位置。 您只能在驅動程式套件中新增您已匯入且已於驅動程式類別目錄中啟用的裝置驅動程式。  

- 您可以從現有的驅動程式套件中複製裝置驅動程式的子集。 首先，建立新的驅動程式套件。 然後將裝置驅動程式的子集新增到新的套件，並將新套件發佈至發佈點。  

- 當您使用工作順序安裝驅動程式時，請建立包含少於 500 個裝置驅動程式的驅動程式套件。


### <a name="create-a-driver-package"></a><a name="BKMK_CreatingDriverPackages"></a> 建立驅動程式套件  

> [!IMPORTANT]  
> 若要建立驅動程式套件，您必須具有未由其他驅動程式套件使用的空網路資料夾。 在大部份的情況下，請在開始此程序之前先建立新資料夾。  

1. 在 Configuration Manager 主控台中，移至 [軟體程式庫]  工作區。 展開 [作業系統]  ，然後選取 [驅動程式套件]  節點。  

2. 在功能區 [常用]  索引標籤上的 [建立]  群組中，選取 [建立驅動程式套件]  。  

3. 為驅動程式套件指定描述性的 [名稱]  。  

4. 為驅動程式套件輸入選擇性的 [註解]  。 使用此描述來提供該驅動程式套件內容或用途的相關資訊。  

5. 在 [路徑]  方塊中，為驅動程式套件指定一個空的來源資料夾。 每個驅動程式套件必須使用唯一的資料夾。 此路徑為必要的網路位置。  

   > [!IMPORTANT]  
   > 站台伺服器帳戶必須擁有所指定來源資料夾的**完整權限**。  

新的驅動程式套件不會包含任何驅動程式。 下一個步驟是將驅動程式新增至套件。  

如果 [驅動程式套件]  節點包含數個套件，您可以將資料夾加入至節點，將套件劃分為幾個邏輯群組。  


### <a name="additional-actions-for-driver-packages"></a><a name="BKMK_PackageActions"></a> 驅動程式套件的其他動作  

當您從 [驅動程式套件]  節點選取一個或多個驅動程式套件時，可執行其他動作來管理那些驅動程式套件。 


#### <a name="create-prestage-content-file"></a>建立預先設置的內容檔案
建立您可用來手動匯入內容及其關聯中繼資料的檔案。 當您的站台伺服器和存放驅動程式套件的發佈點之間使用的是低網路頻寬時，便可使用預先設置的內容。

#### <a name="delete"></a>刪除
從 [驅動程式套件]  節點移除驅動程式套件。

#### <a name="distribute-content"></a>發佈內容
將驅動程式套件發佈到發佈點、發佈點群組，以及與集合相關聯的發佈點群組。

#### <a name="manage-access-accounts"></a>管理存取帳戶
新增、修改或移除驅動程式套件的存取帳戶。

如需套件存取帳戶的詳細資訊，請參閱 [Configuration Manager 中使用的帳戶](../../core/plan-design/hierarchy/accounts.md)。

#### <a name="move"></a>移動
將驅動程式套件移到 [驅動程式套件]  節點中的另一個資料夾。

#### <a name="update-distribution-points"></a>更新發佈點
在所有儲存裝置驅動程式套件的發佈點上更新該套件。 此動作只會複製自上次發佈後變更過的內容。

#### <a name="properties"></a>屬性
開啟 [屬性]  對話方塊。 檢閱並變更驅動程式的內容和屬性。 例如，變更驅動程式的名稱和描述、啟用或停用它，以及指定它可以在哪些平台上執行。 

<!--3607716, fka 1358270-->
從 1810 版開始，驅動程式套件具有 [製造商]  和 [型號]  的中繼資料欄位。 您可以使用這些欄位來設定驅動程式套件的資訊標記，以協助一般例行性作業，或識別可刪除的舊版和重複驅動程式。 在 [一般]  索引標籤上，從下拉式清單中選取現有的值，或輸入字串以建立新的項目。

在 [驅動程式套件]  節點中，這些欄位會顯示為清單中的 [驅動程式製造商]  和 [驅動程式型號]  資料行。 它們也可以作為搜尋準則。

從 1906 版開始，請使用這些屬性在用戶端上預先快取內容。 如需詳細資訊，請參閱[設定預先快取內容](../deploy-use/configure-precache-content.md)。<!--4224642-->  




## <a name="device-drivers"></a><a name="BKMK_DeviceDrivers"></a> 裝置驅動程式

您可以將驅動程式安裝在目的地電腦上，而不需要將它們包含在已部署的 OS 映像中。 Configuration Manager 提供包含您匯入 Configuration Manager 的所有驅動程式之參考的驅動程式類別目錄。 該驅動程式類別目錄位於 [軟體程式庫]  工作區，由兩個節點組成：[驅動程式]  和 [驅動程式套件]  。 [驅動程式]  節點會列出您已匯入驅動程式類別目錄中的所有驅動程式。  


### <a name="import-device-drivers-into-the-driver-catalog"></a><a name="BKMK_ImportDrivers"></a> 將裝置驅動程式匯入驅動程式類別目錄  

在您可以於部署 OS 時使用驅動程式之前，請先將該驅動程式匯入驅動程式類別目錄。 若要更好地管理它們，請僅匯入您計劃在 OS 部署期間安裝的驅動程式。 將多個版本的驅動程式儲存在目錄中，以在您網路上的硬體裝置需求變更時，輕鬆地升級現有的驅動程式。  

作為裝置驅動程式匯入程序的一部分，Configuration Manager 會讀取驅動程式的下列相關屬性：
- Provider
- 執行個體
- 版本
- 簽章
- 支援的硬體
- 支援的平台資訊

根據預設，系統會使用驅動程式所支援的第一個硬體裝置來為它命名。 您稍後可以重新命名該裝置驅動程式。 支援的平台清單取決於驅動程式 INF 檔案中的資訊。 由於此資訊的準確性可能會有所變動，請在將驅動程式匯入目錄後，手動確認其是否為支援的驅動程式。  

在您將裝置驅動程式匯入目錄後，請將它們新增至驅動程式套件或開機映像套件。  

> [!IMPORTANT]  
> 您無法直接將裝置驅動程式匯入 [驅動程式]  節點的子資料夾。 若要將裝置驅動程式匯入子資料夾，請先將裝置驅動程式匯入 [驅動程式]  節點，然後再將驅動程式移至子資料夾。  


#### <a name="process-to-import-windows-device-drivers-into-the-driver-catalog"></a>將 Windows 裝置驅動程式匯入驅動程式類別目錄的程序  

1. 在 Configuration Manager 主控台中，移至 [軟體程式庫]  工作區。 展開 [作業系統]  ，並選取 [驅動程式]  節點。  

2. 在功能區 [常用]  索引標籤上的 [建立]  群組中，選取 [匯入驅動程式]  來啟動 [匯入新驅動程式精靈]  。  

3. 在 [找出驅動程式]  頁面上，指定下列選項：  

    - **匯入下列網路路徑 (UNC) 中的所有驅動程式**：若要匯入特定資料夾中的所有裝置驅動程式，請指定其網路路徑。 例如：`\\servername\share\folder`。  

        > [!NOTE]  
        > 如果有許多子資料夾和驅動程式 INF 檔案，此程序可能需要花費一段時間。  

    - **匯入特定驅動程式**：若要從資料夾匯入特定驅動程式，請指定其 Windows 裝置驅動程式 INF 檔案的網路路徑。  

    - **指定重複驅動程式的選項**：當您匯入重複的裝置驅動程式時，選取您要讓 Configuration Manager 如何管理驅動程式類別  
        - **匯入驅動程式並將新的類別附加到現有的類別**  
        - **匯入驅動程式並保留現有的類別**  
        - **匯入驅動程式並覆寫現有的類別**  
        - **不匯入驅動程式**  

    > [!IMPORTANT]  
    > 當您匯入驅動程式時，站台伺服器必須具備資料夾的 **讀取** 權限，否則匯入會失敗。  

4. 在 [驅動程式詳細資料]  頁面上，指定下列選項：  

    - **隱藏不在儲存體或網路類別中的驅動程式 (針對開機映像)** ：使用此設定來僅顯示存放裝置和網路驅動程式。 此選項會隱藏開機映像通常不需要使用的其他驅動程式，例如視訊驅動程式或數據機驅動程式。  

    - **隱藏未數位簽署的驅動程式**：Microsoft 建議僅使用數位簽署的驅動程式  

    - 在驅動程式清單中，選取要匯入驅動程式類別目錄的驅動程式。  

    - **啟用這些驅動程式並允許電腦安裝它們**：選取此設定來讓電腦安裝裝置驅動程式。 這個選項預設為啟用。  

        > [!IMPORTANT]  
        > 如果裝置驅動程式導致問題或您想要暫停安裝某個裝置驅動程式，請在匯入期間將它停用。 您也可以在匯入驅動程式後將它們停用。  

    - 若要將裝置驅動程式指派給系統管理類別以進行篩選 (例如「桌上型電腦」或「筆記型電腦」)，請選取 [類別]  。 然後選擇現有的類別，或建立新的類別。 使用類別來控制由 [[自動套用驅動程式](../understand/task-sequence-steps.md#BKMK_AutoApplyDrivers)] 工作順序步驟所套用的裝置驅動程式。  

5. 在 [將驅動程式新增至套件]  頁面上，選擇是否要將驅動程式新增到套件中。  

    - 選取用於發佈裝置驅動程式的驅動程式套件。  

        如果有必要，請選取 [新增套件]  以建立新的驅動程式套件。 當您建立新的驅動程式套件時，請提供未由其他驅動程式套件使用的網路共用。  

    - 如果套件已經被發佈到發佈點，請選取對話方塊中的 [是]  以更新發佈點上的開機映像。 在將裝置驅動程式發佈到發佈點之前，您將無法使用它們。 如果您選取 [否]  ，請在使用開機映像之前執行 [更新發佈點]  動作。 如果驅動程式套件從未發佈過，您必須使用 [驅動程式套件]  節點中的 [發佈內容]  動作。  

6. 在 [將驅動程式新增至開機映像]  頁面上，選擇是否要將裝置驅動程式新增至現有的開機映像。  

    > [!NOTE]  
    > 請僅將存放裝置和網路驅動程式新增至開機映像。  

    - 選取對話方塊中的 [是]  來更新發佈點上的開機映像。 在將裝置驅動程式發佈到發佈點之前，您將無法使用它們。 如果您選取 [否]  ，請在使用開機映像之前執行 [更新發佈點]  動作。 如果驅動程式套件從未發佈過，您必須使用 [驅動程式套件]  節點中的 [發佈內容]  動作。  

    - 如果有一或多個驅動程式的架構不符合所選取之開機映像的架構，Configuration Manager 會發出警告。 如果確實兩者不相符，請選取 [確定]  。 返回 [驅動程式詳細資料]  頁面，並清除不符合所選取開機映像之架構的驅動程式。 例如，如果您選取 x64 和 x86 開機映像，所有的驅動程式都必須支援這兩種架構。 如果您選取 x64 開機映像，所有的驅動程式都必須支援 x64 架構。  

        > [!NOTE]  
        > - 架構是以製造商在 .INF 中所回報的架構為準。  
        > - 如果驅動程式回報其支援兩種架構，您就可將它匯入任一開機映像。  

    - 如果將非網路或非存放裝置驅動程式的裝置驅動程式新增至開機映像，Configuration Manager 會發出警告。 在大部分情況下，開機映像並不需要它們。 選取 [是]  來將驅動程式新增至開機映像，或選取 [否]  來返回並修改驅動程式選擇。  

    - 如果有一或多個選取的驅動程式未正確進行數位簽署，Configuration Manager 會發出警告。 選取 [是]  以繼續，或選取 [否]  來返回並變更驅動程式選擇。  

7. 完成精靈。  


### <a name="manage-device-drivers-in-a-driver-package"></a><a name="BKMK_ModifyDriverPackage"></a> 管理驅動程式套件中的裝置驅動程式  

利用下列程序修改驅動程式套件和開機映像。 若要新增或移除驅動程式，請先在 [驅動程式]  節點中找到它。 然後編輯所選取驅動程式相關的套件或開機映像。  

1. 在 Configuration Manager 主控台中，移至 [軟體程式庫]  工作區。 展開 [作業系統]  ，然後選取 [驅動程式]  節點。  

2. 選取您要新增至驅動程式套件的裝置驅動程式。  

3. 在功能區 [常用]  索引標籤上的 [驅動程式]  群組中，選取 [編輯]  ，然後選擇 [驅動程式套件]  。  

4. 若要新增裝置驅動程式，請選取要新增裝置驅動程式的驅動程式套件核取方塊。 若要移除裝置驅動程式，請清除要移除裝置驅動程式的驅動程式套件核取方塊。  

    如果您要新增與驅動程式套件相關聯的裝置驅動程式，則可以選擇建立新的套件。 選取 [新增套件]  ，這會開啟 [新增驅動程式套件]  對話方塊。  

5. 如果套件已經被發佈到發佈點，請選取對話方塊中的 [是]  以更新發佈點上的開機映像。 在將裝置驅動程式發佈到發佈點之前，您將無法使用它們。 如果您選取 [否]  ，請在使用開機映像之前執行 [更新發佈點]  動作。 如果驅動程式套件從未發佈過，您必須使用 [驅動程式套件]  節點中的 [發佈內容]  動作。 取用驅動程式之前，您必須先更新發佈點上的驅動程式封裝。  

    於完成時選取 [確定]  。  


### <a name="manage-device-drivers-in-a-boot-image"></a><a name="BKMK_ManageDriversBootImage"></a> 管理開機映像中的裝置驅動程式  

您可以將已匯入類別目錄的 Windows 裝置驅動程式新增至開機映像。 將裝置驅動程式新增至開機映像時，請遵守下列方針：  

- 僅將存放裝置和網路驅動程式新增至開機映像。 在 Windows PE 中通常不需要其他類型的驅動程式。 非必要的驅動程式只會無謂地增加開機映像的大小。  

- 僅將適用於 Windows 10 的裝置驅動程式新增至開機映像。 Windows PE 所需的版本是以 Windows 10 為基礎。  

- 確定您使用適用於開機映像架構的正確裝置驅動程式。 請勿將 x86 裝置驅動程式新增至 x64 開機映像。  

#### <a name="process-to-modify-the-device-drivers-associated-with-a-boot-image"></a>修改與開機映像相關聯之裝置驅動程式的程序  

1. 在 Configuration Manager 主控台中，移至 [軟體程式庫]  工作區。 展開 [作業系統]  ，然後選取 [驅動程式]  節點。  

2. 選取您要新增至驅動程式套件的裝置驅動程式。  

3. 在功能區 [常用]  索引標籤上的 [驅動程式]  群組中，選取 [編輯]  ，然後選擇 [開機映像]  。  

4. 若要新增裝置驅動程式，請選取要新增裝置驅動程式的開機映像核取方塊。 若要移除裝置驅動程式，請清除要移除裝置驅動程式的開機映像核取方塊。  

5. 如果不想要更新儲存開機映像的發佈點，請清除 [完成時更新發佈點]  核取方塊。 預設會在更新開機映像時更新發佈點。  

    - 選取對話方塊中的 [是]  來更新發佈點上的開機映像。 在將裝置驅動程式發佈到發佈點之前，您將無法使用它們。 如果您選取 [否]  ，請在使用開機映像之前執行 [更新發佈點]  動作。 如果驅動程式套件從未發佈過，您必須使用 [驅動程式套件]  節點中的 [發佈內容]  動作。  

    - 如果有一或多個驅動程式的架構不符合所選取之開機映像的架構，Configuration Manager 會發出警告。 如果確實兩者不相符，請選取 [確定]  。 返回 [驅動程式詳細資料]  頁面，並清除不符合所選取開機映像之架構的驅動程式。 例如，如果您選取 x64 和 x86 開機映像，所有的驅動程式都必須支援這兩種架構。 如果您選取 x64 開機映像，所有的驅動程式都必須支援 x64 架構。  

        > [!NOTE]
        > - 架構是以製造商在 .INF 中所回報的架構為準。  
        > - 如果驅動程式報告支援兩種架構，您就可將它匯入任一個開機映像。  

    - 如果將非網路或非存放裝置驅動程式的裝置驅動程式新增至開機映像，Configuration Manager 會發出警告。 在大部分情況下，開機映像並不需要它們。 選取 [是]  來將驅動程式新增至開機映像，或選取 [否]  來返回並修改驅動程式選擇。  

    - 如果有一或多個選取的驅動程式未正確進行數位簽署，Configuration Manager 會發出警告。 選取 [是]  以繼續，或選取 [否]  來返回並變更驅動程式選擇。  


### <a name="additional-actions-for-device-drivers"></a><a name="BKMK_DriverActions"></a> 裝置驅動程式的其他動作  

在 [驅動程式]  節點中選取驅動程式時，可執行其他動作來管理該驅動程式。  

#### <a name="categorize"></a>分類
針對選取的驅動程式清除、管理或設定系統管理類別。

#### <a name="delete"></a>刪除
從 [驅動程式]  節點移除驅動程式，同時將該驅動程式從相關聯的發佈點移除。

#### <a name="disable"></a>停用
禁止安裝該驅動程式。 此動作會暫時停用該驅動程式。 當您部署 OS 時，工作順序將無法安裝已停用的驅動程式。 

> [!Note]  
> 此動作只會防止系統使用 [自動套用驅動程式]  工作順序步驟安裝該驅動程式。

#### <a name="enable"></a>啟用
讓 Configuration Manager 用戶端電腦和工作順序在您部署 OS 時安裝裝置驅動程式。

#### <a name="move"></a>移動
將裝置驅動程式移到 [驅動程式]  節點中的另一個資料夾。

#### <a name="properties"></a>屬性
開啟 [屬性]  對話方塊。 檢閱並變更驅動程式的屬性。 例如，變更其名稱和描述、啟用或停用它，以及指定它可以在哪些平台上執行。



## <a name="use-task-sequences-to-install-drivers"></a><a name="BKMK_TSDrivers"></a> 使用工作順序來安裝驅動程式  

使用工作順序來將 OS 部署的方式自動化。 工作順序中的每一個步驟皆可執行一個特定動作，例如安裝裝置驅動程式。 當您部署 OS 時，您可以使用下列兩個工作順序步驟來安裝裝置驅動程式：  

- [自動套用驅動程式](../understand/task-sequence-steps.md#BKMK_AutoApplyDrivers)：此步驟可在部署作業系統時自動比對及安裝裝置驅動程式。 您可以設定工作順序步驟，以僅針對所偵測到的每個硬體裝置安裝最符合的驅動程式。 或者，指定該步驟為每個所偵測到的硬體裝置安裝所有相容的驅動程式，然後讓 Windows 安裝程式選擇最佳的驅動程式。 您也可以指定驅動程式類別，以限制此步驟可用的驅動程式。  

- [套用驅動程式套件](../understand/task-sequence-steps.md#BKMK_ApplyDriverPackage)：此步驟可開放 Windows 安裝程式使用特定驅動程式套件中的所有裝置驅動程式。 Windows 安裝程式會在指定的驅動程式套件中搜尋必要的裝置驅動程式。 當您建立獨立媒體時，您必須使用此步驟安裝裝置驅動程式。  

當您使用這些工作順序步驟時，您也可以指定系統在部署 OS 的電腦上安裝驅動程式的方式。 如需詳細資訊，請參閱[管理工作順序，將工作自動化](../deploy-use/manage-task-sequences-to-automate-tasks.md)。  



## <a name="driver-reports"></a><a name="BKMK_DriverReports"></a> 驅動程式報告  

您可以運用 [驅動程式管理]  報告類別中的數種報告判定與驅動程式類別目錄中的裝置驅動程式相關之一般資訊。 如需報告的詳細資訊，請參閱[報告簡介](../../core/servers/manage/introduction-to-reporting.md)。

