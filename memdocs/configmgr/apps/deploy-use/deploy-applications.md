---
title: 部署應用程式
titleSuffix: Configuration Manager
description: 建立或模擬將應用程式部署至裝置或使用者集合的部署
ms.date: 07/26/2019
ms.prod: configuration-manager
ms.technology: configmgr-app
ms.topic: conceptual
ms.assetid: 2629c376-ec43-4f0e-a78b-4223cc9302bf
author: aczechowski
ms.author: aaroncz
manager: dougeby
ms.openlocfilehash: a7bbf395a5de98459043609986e51647362e7a0b
ms.sourcegitcommit: 1442a4717ca362d38101785851cd45b2687b64e5
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/23/2020
ms.locfileid: "82075331"
---
# <a name="deploy-applications-with-configuration-manager"></a>使用 Configuration Manager 部署應用程式

適用於：  Configuration Manager (最新分支)

在 Configuration Manager 中建立或模擬將應用程式部署至裝置或使用者集合的部署。 此部署會指示 Configuration Manager 用戶端如何及何時安裝軟體。

您必須至少為應用程式建立一個部署類型，才能部署應用程式。 如需詳細資訊，請參閱[建立應用程式](create-applications.md)。

從 1906 版開始，您可以建立作為單一部署傳送給使用者或裝置集合的應用程式群組。 如需詳細資訊，請參閱[建立應用程式群組](create-app-groups.md)。

您也可以模擬應用程式部署。 這個模擬會測試部署的適用性，而不會安裝應用程式或將其解除安裝。 模擬部署會評估部署類型的偵測方法、需求和相依性，並且在 [監視]  工作區的 [部署]  節點中回報結果。 如需詳細資訊，請參閱[模擬應用程式部署](simulate-application-deployments.md)。

> [!Note]
> 您只能模擬必要應用程式的部署，但無法模擬套件或軟體更新的部署。
>
> 已註冊 MDM 的裝置不支援模擬部署、使用者體驗或排程設定。



## <a name="deploy-an-application"></a><a name="bkmk_deploy"></a> 部署應用程式

1. 在 Configuration Manager 主控台中，移至 [軟體程式庫]  工作區，展開 [應用程式管理]  ，然後選取 [應用程式]  或 [應用程式群組]  節點。

2. 從清單中選取要部署的應用程式或應用程式群組。 在功能區中，按一下 [部署]  。  

> [!Note]  
> 當您檢視現有部署的內容時，下列各節會對應至 [部署內容] 視窗的各索引標籤：  
>
> - [一般](#bkmk_deploy-general)
> - [內容](#bkmk_deploy-content)
> - [部署設定](#bkmk_deploy-settings)
> - [排程](#bkmk_deploy-sched)
> - [使用者體驗](#bkmk_deploy-ux)
> - [警示](#bkmk_deploy-alerts)


### <a name="deployment-general-information"></a><a name="bkmk_deploy-general"></a> 部署**一般**資訊

在 [部署軟體精靈] 的 [一般]  頁面上，指定下列資訊：  

- **軟體**：此值會顯示要部署的應用程式。 按一下 [瀏覽]  即可選取不同的應用程式。  

- **集合**：按一下 [瀏覽]  選取您要部署應用程式的集合。  

- **使用與此集合相關聯的預設發佈點群組**：在集合的預設發佈點群組上儲存應用程式內容。 如果您還沒有為所選的集合及發佈點群組建立關聯，便無法使用此選項。  

- **自動發佈相依性的內容**：如果應用程式中的任何部署類型具有相依性，則站台也會將相依應用程式內容傳送至發佈點。  

    >[!Note]  
    > 如果您是在部署主要應用程式後才更新相依應用程式，站台就不會自動發佈任何新的相依性內容。  

- **註解 (選擇性)** ：選擇性輸入此部署的描述。  


### <a name="deployment-content-options"></a><a name="bkmk_deploy-content"></a> 部署**內容**選項

在 [內容]  頁面上，按一下 [新增]  ，將此應用程式的內容發佈至發佈點或發佈點群組。

如果您已在 [一般] 頁面上選取 [使用與此集合相關聯的預設發佈點]  選項，系統就會自動填入此選項。 只有 [應用程式系統管理員]  安全性角色的成員可以修改它。

如果應用程式內容已發佈，則會出現在這裡。


### <a name="deployment-settings"></a><a name="bkmk_deploy-settings"></a> **部署設定**

在 [部署設定]  頁面上，指定下列資訊：  

- **動作**：從下拉式清單中，選擇此部署是要 [安裝]  還是 [解除安裝]  應用程式。  

    > [!NOTE]  
    > 如果您建立一個部署來 [安裝]  應用程式，並建立另一個部署來 [解除安裝]  相同裝置上的相同應用程式，則會優先進行 [安裝]  部署。  

    在建立部署之後，即無法變更部署的動作。  

- **目的**：從下拉式清單中選擇下列其中一個選項：  

  - **可用**：使用者會在軟體中心看見應用程式。 他們可以視需求安裝應用程式。  

  - **必要**：用戶端會根據您設定的排程自動安裝應用程式。 如果未隱藏應用程式，使用者可以追蹤其部署狀態。 他們也可以使用軟體中心，在期限之前安裝應用程式。  

    > [!NOTE]  
    > 當您將部署動作設定為 [解除安裝]  時，部署目的會自動設定為 [必要]  。 您無法變更此行為。  

- **讓使用者可嘗試修復此應用程式**：從 1810 版開始，如果您使用修復命令列來建立應用程式，請啟用此選項。 使用者會在軟體中心看到 [修復]  應用程式的選項。<!--1357866-->  

- **將軟體預先部署至使用者的主要裝置**：如果部署的對象是使用者，請選取此選項以將應用程式部署到使用者的主要裝置。 此設定不需要使用者在執行部署前先登入。 如果使用者必須與安裝程序進行互動，請勿選取此選項。 此選項只適用於 [必要]  的部署。  

- **傳送喚醒封包**：如果部署為 [必要]  ，Configuration Manager 就會在用戶端執行部署之前，將喚醒封包傳送給電腦。 此封包會在到達安裝期限時喚醒電腦。 使用此選項之前，必須先針對 [網路喚醒] 設定電腦和網路。 如需詳細資訊，請參閱[規劃如何喚醒用戶端](../../core/clients/deploy/plan/plan-wake-up-clients.md)。  

- **允許計量付費網際網路連線上的用戶端在安裝期限之後下載內容 (可能會產生額外費用)** ：此選項只適用於目的為 [必要]  的部署。  

- **自動升級此應用程式的任何已取代版本**：用戶端會利用取代應用程式，升級應用程式的任何已取代版本。

    > [!Note]  
    > 不論系統管理員是否核准，此選項都適用。 如果系統管理員已核准被取代的版本，則不需要同時核准取代的版本。 只有新的要求需要核准，取代的升級並不需要。<!--515824-->  
    >
    > 您可以針對 [可用]  安裝目的來啟用或停用此選項。 <!--1351266-->


#### <a name="approval-settings"></a><a name="bkmk_approval"></a> 核准設定

應用程式核准行為取決於您是否啟用 [依據裝置為使用者核准應用程式要求]  這個建議的選擇性功能。

- **系統管理員必須在裝置上核准此應用程式要求**：如果您啟用選擇性功能，系統管理員須先核准使用者的應用程式要求，使用者才可以在所要求的裝置上安裝應用程式。 如果系統管理員核准要求，使用者就只能在該裝置上安裝應用程式。 使用者必須提交其他要求，才能在其他裝置上安裝應用程式。 當部署目的為 [必要]  ，或是將應用程式部署至裝置集合時，無法使用此選項。

- **如果使用者要求此應用程式，則需要經系統管理員核准**：如果您未啟用選擇性功能，系統管理員須先核准使用者的應用程式要求，使用者才可以安裝應用程式。 當部署目的為 [必要]  ，或是將應用程式部署至裝置集合時，無法使用此選項。  

如需詳細資訊，請參閱[核准應用程式](app-approval.md)。


#### <a name="deployment-properties-deployment-settings"></a>部署內容的**部署設定**

當您檢視部署內容時，如果受到部署類型技術的支援，則會在 [部署設定]  索引標籤上顯示下列選項：

**自動關閉您在部署類型內容對話方塊之安裝行為索引標籤上所指定且正在執行的可執行檔**。 如需詳細資訊，請參閱[如何在安裝應用程式之前檢查執行中的可執行檔](#bkmk_exe-check)。



### <a name="deployment-scheduling-settings"></a><a name="bkmk_deploy-sched"></a> 部署的**排程**設定

在 [排程]  頁面上，設定此應用程式部署或提供給用戶端裝置的時間。

根據預設，Configuration Manager 會立即提供部署原則給用戶端。 如果您想要建立部署，但稍後才要提供給用戶端使用，請設定 [Schedule the application to be available] \(排程應用程式以供使用\)  選項。 然後選取日期和時間，包括該日期和時間是以 UTC 或用戶端的本機時間為基準。

如果部署為 [必要]  ，也請指定 [安裝期限]  。 根據預設，此期限越早越好。

例如，您需要部署新的企業營運系統應用程式。 所有使用者都必須在特定時間之前安裝它，但您想要讓他們可以選擇提早加入。 您也必須確保站台已將內容發佈至所有發佈點。 您排程應用程式在今天起五天內以供使用。 此排程讓您有時間發佈內容並確認其狀態。 然後，您可以將安裝期限設定為今天起一個月內。 五天後，當應用程式可用時，使用者會在軟體中心看見它。 如果使用者未執行任何動作，用戶端會在安裝期限自動安裝應用程式。

如果您要部署的應用程式會取代另一個應用程式，請將安裝期限設定在使用者收到新應用程式時。 請設定 [安裝期限]  來升級已取代應用程式的使用者。


#### <a name="delay-enforcement-with-a-grace-period"></a>延遲施行寬限期

您可能想要提供更多時間給使用者，以在「超過」  您設定的任何期限之後，還能安裝必要應用程式。 當電腦已長時間關閉，而需要安裝大量應用程式時，通常就需要允許此行為。 例如，當使用者從假期歸來時，他們必須等候很長的時間，讓用戶端安裝逾期的部署。 為了協助解決這個問題，請定義施行寬限期。

- 首先，使用用戶端設定中的 [延後到部署期限後施行的寬限期 (小時)]  屬性設定此寬限期。 如需詳細資訊，請參閱[電腦代理程式](../../core/clients/deploy/about-client-settings.md#computer-agent)群組。 請指定介於 **1** 與 **120** 小時之間的值。  

- 在必要應用程式部署的 [排程]  頁面上，啟用 [根據使用者喜好設定，延遲強制施行此部署，最多可延後用戶端設定中所定義的寬限期]  選項。 已啟用此選項且以您一併部署用戶端設定之裝置為目標的所有部署，都適用此施行寬限期。

期限之後，用戶端就會在使用者所設定的第一個非營業時間內安裝此應用程式，直到該寬限期結束為止。 不過，使用者仍可隨時開啟軟體中心並安裝應用程式。 過了寬限期後，就會強制還原為逾時部署的標準行為。

![寬限期時間軸的圖表](media/grace-period.svg)

<!-- SCCMDocs issue #1599 -->

> [!Note]  
> 在大部分情況下，此功能都可解決使用者離開辦公室時裝置電源關閉的案例。 技術上來說，寬限期是從用戶端在部署期限後取得原則之後開始的。 若您停止 Configuration Manager 用戶端服務 (CcmExec) 並在部署期限後將它重新啟動，會發生相同的行為。

### <a name="deployment-user-experience-settings"></a><a name="bkmk_deploy-ux"></a> 部署的**使用者體驗**設定

在 [使用者體驗]  頁面上，指定使用者如何與應用程式安裝進行互動的相關資訊。

- **使用者通知**：指定是否要在設定的軟體可用時間，於軟體中心內顯示通知。 此設定也會控制是否要在用戶端電腦上通知使用者。 針對可用部署，您無法選取 [在軟體中心和所有通知中隱藏]  選項。  

    - **必須進行軟體變更時，將對使用者顯示快顯通知改為顯示對話視窗**<!--3555947-->:從 1902 版開始，選取此選項來將使用者體驗變更為更具提示效果。 它僅適用於必要的部署。 如需詳細資訊，請參閱[針對軟體中心進行規劃](../plan-design/plan-for-software-center.md#bkmk_impact)。

- **軟體安裝**與**系統重新啟動**：僅針對必要部署設定這些設定。 當部署達到任何定義之維護期間以外的期限時，這些設定會指定相關行為。 如需維護期間的詳細資訊，請參閱[如何在 Configuration Manager 中使用維護期間](../../core/clients/manage/collections/use-maintenance-windows.md)。  

- **Windows Embedded 裝置的寫入篩選器處理**：這項設定會在具備寫入篩選功能的 Windows Embedded 裝置上控制安裝行為。 選擇在安裝期限或維護期間認可變更的選項。 當您選取此選項時，需要重新啟動裝置才能保存裝置的變更。 否則會將應用程式安裝至暫存重疊，並於稍後認可。  

    - 當您將軟體更新部署至 Windows Enbedded 裝置時，請確定裝置是已設定維護期間之集合的成員。 如需有關維護期間和 Windows Embedded 裝置的詳細資訊，請參閱[建立 Windows Embedded 應用程式](../get-started/creating-windows-embedded-applications.md)。  


### <a name="deployment-alerts"></a><a name="bkmk_deploy-alerts"></a> 部署**警示**

在 [警示]  頁面上，設定 Configuration Manager 如何針對此部署產生警示。 如果您同時使用 System Center Operations Manager，也請設定其警示。 您只能針對必要部署設定一些警示。 


## <a name="create-a-phased-deployment"></a><a name="bkmk_phased"></a> 建立階段式部署

<!--1358147-->
從 1806 版開始，建立針對應用程式的階段式部署。 階段式部署可讓您根據可自訂的準則與群組，以組織協調且循序的軟體推出。 例如，將應用程式部署至試驗集合，然後根據成功準則自動繼續推出。

如需詳細資訊，請參閱下列文章：  

- [建立階段式部署](../../osd/deploy-use/create-phased-deployment-for-task-sequence.md?toc=/sccm/apps/toc.json&bc=/sccm/apps/breadcrumb/toc.json)  

- [管理及監視階段式部署](../../osd/deploy-use/manage-monitor-phased-deployments.md?toc=/sccm/apps/toc.json&bc=/sccm/apps/breadcrumb/toc.json)  



## <a name="delete-a-deployment"></a><a name="bkmk_delete"></a> 刪除部署

1. 在 Configuration Manager 主控台中，移至 [軟體程式庫]  工作區，展開 [應用程式管理]  ，然後選取 [應用程式]  或 [應用程式群組]  節點。  

2. 選取應用程式或應用程式群組 (包含您要刪除的部署)。  

3. 切換至詳細資料窗格的 [部署]  索引標籤，然後選取部署。  

4. 在功能區的 [部署]  索引標籤和 [部署]  群組中，按一下 [刪除]  。  

當您刪除應用程式部署時，並不會移除用戶端已安裝的任何應用程式執行個體。 若要移除這些應用程式，請將應用程式部署至電腦以 [解除安裝]  。 如果您刪除應用程式部署，或從正在進行部署的集合中移除資源，在軟體中心就不會再看到該應用程式。



## <a name="user-notifications-for-required-deployments"></a><a name="bkmk_notify"></a> 必要部署的使用者通知

當使用者收到必要軟體並選取 [延遲並於此之後再提醒我一次]  設定時，他們可以從下列選項中進行選擇：  

- **稍後**︰指定根據用戶端設定中所設定的通知設定來排定通知。  

- **固定時間**︰指定將通知排定在選取的時間後再次顯示。 例如，如果您選取 30 分鐘，就會在 30 分鐘後再次顯示通知。  

![預設用戶端設定中的 [電腦代理程式] 群組](media/ComputerAgentSettings.png)

最大延遲時間一律是以用戶端設定中每次與部署時間表一起設定的通知值為基礎。 例如：  

- 您可以將 [電腦代理程式]  頁面上的 [部署期限超過 24 小時，每隔下列時間通知使用者 (小時)]  設定設為長達 10 小時。  

- 在部署期限結束之前，用戶端會顯示通知對話方塊超過 24 小時。  

- 此對話方塊顯示的延遲選項最長為 10 小時，但絕不會超過 10 小時。  

- 隨著部署期限的逼近，此對話方塊顯示的選項也會變得越來越少。 這些選項會與部署時間表之每個元件的相關用戶端設定一致。  

針對高風險部署 (例如會部署作業系統的工作順序)，使用者通知體驗會更具干預性。 每次通知您必須進行重大軟體維護時，都會顯示類似下面的對話方塊，而不是暫時性的工作列通知：

![必要軟體對話方塊通知您進行重大軟體維護](media/client-toast-notification.png)



## <a name="check-for-running-executable-files"></a><a name="bkmk_exe-check"></a> 檢查是否有執行中的可執行檔

設定部署，以檢查用戶端上是否有特定可執行檔正在執行。 使用此選項來檢查是否有可能中斷應用程式安裝的任何處理序。 如果其中一個可執行檔正在執行，用戶端會封鎖該部署類型的安裝。 使用者必須關閉執行中的可執行檔，用戶端才能安裝部署類型。 針對目的設為 [必要] 的部署，用戶端可以自動關閉執行中的可執行檔。

1. 開啟部署類型的 [內容]  對話方塊。  

2. 切換至 [安裝行為]  索引標籤，然後按一下 [新增]  。  

3. 在 [新增可執行檔]  對話方塊中，輸入目標可執行檔的名稱。 或者，輸入應用程式的易記名稱，以協助您在清單中識別它。  

4. 按一下 [確定]  ，再按一次 [確定]  以關閉部署類型內容視窗。  

5. 當您部署應用程式時，選取 [自動關閉您在部署類型內容對話方塊之安裝行為索引標籤上所指定且正在執行的可執行檔]  選項。 此選項位於部署內容的 [部署設定]  索引標籤上。  

> [!Note]
> 如果您將應用程式設定為檢查執行中的可執行檔，並將其包含在[安裝應用程式](../../osd/understand/task-sequence-steps.md#BKMK_InstallApplication)工作順序步驟中，工作順序將無法安裝該應用程式。 如果您未將此工作順序步驟設定為在發生錯誤時繼續執行，則整個工作順序會失敗。

### <a name="client-behaviors-and-user-notifications"></a>用戶端行為和使用者通知

在用戶端收到部署之後，便適用下列行為：  

- 如果您已將應用程式部署為 [可用]  ，而使用者嘗試安裝該應用程式，用戶端就會提示使用者先關閉執行中的可執行檔，再繼續進行安裝。  

- 如果您已將應用程式部署為 [必要]  ，並已指定為 [自動關閉您在部署類型內容對話方塊之安裝行為索引標籤上所指定且正在執行的可執行檔]  ，則用戶端會顯示一則通知。 它會通知使用者在達到應用程式安裝期限時會自動關閉指定的可執行檔。  

    - 在用戶端設定的 [電腦代理程式]  群組中，排程這些對話方塊。 如需詳細資訊，請參閱[電腦代理程式](../../core/clients/deploy/about-client-settings.md#computer-agent)。  

    - 如果您不想讓使用者看到這些訊息，請在部署屬性的 [使用者體驗]  索引標籤上選取 [在軟體中心和所有通知中隱藏]  選項。 如需詳細資訊，請參閱[部署的使用者體驗設定](#bkmk_deploy-ux)。  

- 如果您已將應用程式部署為 [必要]  ，但未指定 [自動關閉您在部署類型屬性對話方塊之 [安裝行為] 索引標籤上所指定且正在執行的可執行檔]  ，則在一或多個指定的應用程式正在執行時，應用程式的安裝會失敗。  



## <a name="deploy-user-available-applications-on-azure-ad-joined-devices"></a>在已加入 Azure AD 的裝置上部署使用者可用的應用程式

<!-- 1322613 -->
如果您將應用程式部署為可供使用者使用，他們就能在 Azure Active Directory (Azure AD) 裝置上，透過軟體中心來瀏覽和安裝這些應用程式。  

### <a name="prerequisites"></a>先決條件

- 在管理點上啟用 HTTPS  

- 將站台與 [Azure AD](../../core/servers/deploy/configure/azure-services-wizard.md) 整合以進行**雲端管理**  

    - 設定 [Azure AD 使用者探索](../../core/servers/deploy/configure/configure-discovery-methods.md#azureaadisc)  

- 將應用程式部署成可供來自 Azure AD 的使用者集合使用  

- 將任何應用程式內容發佈至[雲端發佈點](../../core/plan-design/hierarchy/use-a-cloud-based-distribution-point.md)  

- 在[電腦代理程式](../../core/clients/deploy/about-client-settings.md#computer-agent)群組中啟用**使用新的軟體中心**用戶端設定  

- 用戶端 OS 必須是 Windows 10 且已加入 Azure AD。 已加入單純雲端網域，或已加入混合式 Azure AD。  

- 支援以網際網路為基礎的用戶端：  

    - [雲端管理閘道](../../core/clients/manage/cmg/plan-cloud-management-gateway.md)  

    - 啟用用戶端設定：在[用戶端原則](../../core/clients/deploy/about-client-settings.md#client-policy)群組中**啟用網際網路用戶端的使用者原則要求**  

- 支援內部網路上的用戶端：  

    - 將雲端發佈點新增至用戶端所使用的界限群組  

    - 用戶端必須解析支援 HTTPS 管理點的完整網域名稱 (FQDN)  



## <a name="next-steps"></a>後續步驟

- [監視應用程式](monitor-applications-from-the-console.md)
- [對應用程式部署進行疑難排解](troubleshoot-application-deployment.md)
- [應用程式的管理工作](management-tasks-applications.md)
- [軟體中心使用者指南](../../core/understand/software-center.md)
