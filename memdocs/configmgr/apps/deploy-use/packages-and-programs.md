---
title: 封裝和程式
titleSuffix: Configuration Manager
description: 支援使用 Configuration Manager 舊版套件和程式的部署。
ms.date: 07/26/2019
ms.prod: configuration-manager
ms.technology: configmgr-app
ms.topic: conceptual
ms.assetid: caad0507-9913-415a-b13d-d36f8f0a1b80
author: aczechowski
manager: dougeby
ms.author: aaroncz
ms.openlocfilehash: 2c125212a13790e196d001f53411633d1e42d4f8
ms.sourcegitcommit: bbf820c35414bf2cba356f30fe047c1a34c5384d
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/21/2020
ms.locfileid: "81689286"
---
# <a name="packages-and-programs-in-configuration-manager"></a>Configuration Manager 中的封裝和程式

適用於：  Configuration Manager (最新分支)

Configuration Manager 會繼續支援 Configuration Manager 2007 中使用的套件和程式。 在您部署以下工具或指令碼時，使用封裝和程式部署的方式可能會比透過應用程式部署適合：  

- 未在電腦上安裝應用程式的系統管理工具
- 不需要持續監控的「單次用」指令碼  
- 按週期性排程執行且無法使用全域評估的指令碼

> [!TIP]  
> 請考慮使用 Configuration Manager 主控台中的[指令碼](create-deploy-scripts.md)功能。 對於上述的某些案例來說，指令碼可能是更好的解決方案，而不是使用套件和程式。

當您移轉舊版 Configuration Manager 的套件時，您可以將它們部署在 Configuration Manager 階層中。 移轉完成之後，封裝會出現在 [軟體程式庫]  工作區的 [封裝]  節點中。

修改和部署這些套件的方式，與使用軟體發佈相同。 [從定義匯入套件精靈]  會保留在 Configuration Manager 中，以匯入舊版套件。 當您從 Configuration Manager 2007 移轉至 Configuration Manager 階層時，公告會轉換成部署。  

> [!NOTE]  
> 使用套件轉換管理員，將套件和程式轉換成 Configuration Manager 應用程式。  
>
> 從 1806 版開始，套件轉換管理員會與 Configuration Manager 整合。 如需詳細資訊，請參閱[套件轉換管理員](../pcm/package-conversion-manager.md)。  

套件可以使用 Configuration Manager 的一些新功能 (包括發佈點群組和監視)。 您無法使用 Configuration Manager 中的套件和程式來部署 Microsoft Application Virtualization (App-V) 應用程式。 若要發佈虛擬應用程式，請將它們建立為 Configuration Manager 應用程式。 如需詳細資訊，請參閱[部署 App-V 虛擬應用程式](../get-started/deploying-app-v-virtual-applications.md)。  


## <a name="create-a-package-and-program"></a>建立套件和程式

### <a name="use-the-create-package-and-program-wizard"></a>使用建立套件和程式精靈

1. 在 Configuration Manager 主控台中，移至 [軟體程式庫]  工作區，展開 [應用程式管理]  ，然後選取 [套件]  節點。  

2. 在功能區的 [首頁]  索引標籤上，選擇 [建立]  群組中的 [建立套件]  。  

3. 在 **封裝** 頁面 **建立套件和程式精靈**, ，指定下列資訊：  

    - **名稱**：指定套件的名稱，不可超過 50 個字元。  

    - **描述**：指定這個套件的描述，不可超過 128 個字元。  

    - **製造商** (選擇性)：指定製造商名稱，以協助您在 Configuration Manager 主控台中識別套件。 這個名稱不可超過 32 個字元。

    - **語言** (選擇性)：指定套件的語言版本，不可超過 32 個字元。  

    - **版本** (選擇性)：指定套件的版本號碼，不可超過 32 個字元。

    - **此套件包含來源檔案**：這個設定指出套件是否需要來源檔案存在於用戶端裝置上。 根據預設，精靈不會啟用此選項，且 Configuration Manager 不會使用套件的發佈點。 當選取此選項時，請指定要發佈到發佈點的套件內容。  

    - **來源資料夾**：如果套件包含來源檔案，請選擇 [瀏覽]  以開啟 [設定來源資料夾]  對話方塊，然後指定套件的來源檔案位置。  

        > [!NOTE]  
        > 站台伺服器的電腦帳戶必須具有所指定來源資料夾的讀取權。  

    - 從 1906 版開始，如果您希望在用戶端上預先快取內容，請指定套件的 [架構]  和 [語言]  。 如需詳細資訊，請參閱[設定預先快取內容](../../osd/deploy-use/configure-precache-content.md)。<!--4224642-->  

4. 在 [建立套件和程式精靈]  的 [程式類型]  頁面上，選取要建立的程式類型，然後選擇 [下一步]  。 您可以建立[電腦](#create-a-standard-program)或[裝置](#create-a-device-program)的程式，也可以略過這個步驟，稍後再建立程式。  

    > [!TIP]  
    > 若要為現有的套件建立新程式，請先選取套件。 然後，在 [首頁]  索引標籤的 [套件]  群組中，選擇 [建立程式]  開啟 [建立程式精靈]  。  

#### <a name="create-a-standard-program"></a>建立標準程式

1. 在 [建立套件和程式精靈]  的 [程式類型]  頁面上，選擇 [標準程式]  ，然後選擇 [下一步]  。  

2. 在 [標準程式]  頁面上，指定下列資訊：  

    - **名稱：** 指定程式的名稱，不可超過 50 個字元。  

        > [!NOTE]  
        > 程式名稱必須是唯一在封裝內。 建立程式之後，您無法修改它的名稱。  

    - **命令列**：輸入用來啟動這個程式的命令列，或選擇 [瀏覽]  瀏覽至檔案位置。  

        如不指定檔案名稱的副檔名，Configuration Manager 可能會嘗試使用 .com、.exe 和 .bat 副檔名。  

        當用戶端執行程式時，Configuration Manager 會在下列位置搜尋檔案：

        - 套件內
        - 本機的 Windows 資料夾
        - 本機的 *%path%*

        如果找不到檔案，程式就會失敗。  

    - **啟動資料夾** (選擇性)：指定要在其中執行程式的資料夾，不可超過 127 個字元。 此資料夾可以是用戶端上的絕對路徑。 其也可能是包含套件的發佈點資料夾相對路徑。

    - **執行**：指定程式將在用戶端電腦上執行的模式。 選取下列其中一個選項：  

        - **標準**：系統與程式的預設值為基礎的標準模式中執行的程式。 此為預設模式。  

        - **最小化**：程式會在用戶端裝置上執行最小化。 使用者可能會在工作列通知區域中看到安裝活動。  

        - **最大化**：程式會在用戶端裝置上執行最大化。 使用者會看到所有的安裝活動。  

        - **隱藏**：在用戶端裝置上隱藏程式的執行。 使用者不會看到任何安裝活動。  

    - **程式可執行**：指定只有使用者登入時才能執行程式、只有無使用者登入時才能執行程式，還是不論使用者是否登入用戶端電腦都執行程式。  

    - **執行模式**：指定以系統管理權限還是以目前登入的使用者權限執行程式。  

    - **允許使用者檢視程式安裝並與其互動**：使用這個設定 (如果可用的話)，指定是否允許使用者與程式安裝互動。 只有在符合下列條件時，才能使用此選項：

        - [程式可執行]  設定為 [只有在沒有使用者登入時]  或 [無論使用者是否登入] 
        - [執行模式]  設定為 [以系統管理權限執行]   

    - **磁碟機模式**：指定如何在網路上執行這個程式的相關資訊。 選擇下列其中一個選項：  

        - **以 UNC 名稱執行**：指定以通用命名慣例 (UNC) 名稱執行程式。 這是預設設定。  

        - **需要磁碟機代號**：指定程式需要完整限定其位置的磁碟機代號。 針對此設定，Configuration Manager 可以在用戶端上使用任何可用的磁碟機代號。  

        - **需要特定磁碟機代號**：指定程式需要您指定完整限定其位置的特定磁碟機代號。 例如：**Z:** 。 如果用戶端已使用指定的磁碟機代號，則不會執行程式。  

    - **重新連線到在記錄檔的發佈點上**：指出在使用者登入時用戶端是否重新連線到發佈點。 根據預設，精靈不會啟用此選項。

3. 在 [建立套件和程式精靈]  的 [需求]  頁面上，指定下列資訊：  

    - **先執行其他程式**：識別在執行此套件及程式之前要執行的套件及程式。  

    - **平台需求**：選取 [此程式可以在任何平台上執行]  或 [此程式僅能在指定的平台上執行]  。 然後選擇用戶端安裝此套件和程式時必須具備的作業系統版本。  

    - **預估的磁碟空間**：指定程式在電腦上執行時所需的磁碟空間量。 預設值為 [未知]  。 如有必要，請指定大於或等於零的整數。 如果設定值，也請選取值的單位。  

    - **允許的執行時間上限 (分鐘)** ：指定您預期程式在用戶端電腦上執行的時間上限。 預設值為 **120** 分鐘。 只使用大於零的整數。  

        > [!IMPORTANT]  
        > 如果對此程式部署對象的集合使用維護期間，則當 [允許的執行時間上限]  超過排程的維護期間時，便會發生衝突。 如果將執行階段上限設定為 [未知]  ，則程式會在維護期間內開始執行。 然後繼續視需要執行，直到維護期間結束為止。 如果將執行階段上限設定為超過任何可用維護期間長度的特定期間，則用戶端不會執行程式。  

        如果您將這個值設定為 [未知]  ，則 Configuration Manager 會將允許的執行時間上限設定為 12 小時 (720 分鐘)。  

        > [!NOTE]  
        > 如果程式超過執行階段上限，Configuration Manager 會在符合下列條件時停止程式：
        >
        > - 啟用 [以系統管理權限執行]  的選項
        > - 未啟用 [允許使用者檢視程式安裝並與其互動]  的選項  

#### <a name="create-a-device-program"></a>建立裝置程式  

1. 在 [建立套件和程式精靈]  的 [程式類型]  頁面上，選取 [適用於裝置的程式]  ，然後按一下 [下一步]  。  

2. 在 [適用於裝置的程式]  頁面上，指定下列設定：  

    - **名稱**：指定程式的名稱，不可超過 50 個字元。  

        > [!NOTE]  
        > 程式名稱必須是唯一在封裝內。 建立程式之後，您無法修改它的名稱。  

    - **註解** (選擇性)：指定這個裝置程式的註解，不可超過 127 個字元。  

    - **下載資料夾**：指定儲存套件來源檔案的裝置資料夾名稱。 預設值為 `\Temp\`。  

    - **命令列**：輸入用以啟動此程式的命令列。 若要瀏覽至檔案位置，請選擇 [瀏覽]  。  

    - **在下載資料夾中執行命令列**：選取這個選項，從下載的資料夾中執行程式。  

    - **從此資料夾執行命令列**：選取這個選項，指定從中執行程式的不同資料夾。  

3. 在 [需求]  頁面中，指定下列設定：  

    - **預估的磁碟空間**：指定軟體所需的磁碟空間量。 用戶端會在安裝程式之前，向行動裝置使用者顯示此值。  

    - **下載程式**：指定行動裝置何時可以下載此程式的資訊。 您可以指定 [盡快]  、[僅透過高速網路]  或 [僅當裝置銜接底座時]  。  

    - **其他需求**：指定這個程式的任何其他需求。 使用者在安裝軟體之前，要先查看這些需求。 例如，您可以通知它們之前需要關閉所有其他應用程式執行程式的使用者。  

## <a name="deploy-packages-and-programs"></a>部署套件和程式  

1. 在 Configuration Manager 主控台中，移至 [軟體程式庫]  工作區，展開 [應用程式管理]  ，然後選取 [套件]  節點。  

2. 選取您要部署的封裝。 在功能區 [常用]  索引標籤上的 [部署]  群組中，選擇 [部署]  。  

3. 在 [部署軟體精靈]  的 [一般]  頁面上，指定所要部署的套件和程式名稱。 選取所要部署套件和程式的集合，以及任何選擇性的註解。  

    若要將封裝內容儲存在集合預設發佈點群組中，請選取 [使用與此集合相關聯的預設發佈點群組]  選項。 如果您未建立此集合與發佈點群組的關聯，就無法使用此選項。  

4. 在 [內容]  頁面上，選擇 [新增]  。 選取要發佈此套件及程式內容的發佈點或發佈點群組。  

5. 在 [部署設定] 　頁面上，指定下列設定：  

    - **目的**：選擇下列其中一個選項：

        - **可供使用**：使用者會在軟體中心看到已發佈的套件和程式，並可視需要安裝。  

        - **必要**：根據設定的排程，自動部署套件和程式。 您可在軟體中心內追蹤其部署狀態，並於期限前安裝。  

        > [!NOTE]
        > 如果多個使用者登入裝置，則套件和工作順序部署可能不會出現在軟體中心中。

    - **傳送喚醒封包**：如果將部署目的設定為 [必要]  並選取此選項，則站台會先將喚醒封包傳送至已達安裝期限的電腦。 您必須先設定 [網路喚醒] 電腦，才可以使用此選項。 如需詳細資訊，請參閱[如何設定網路喚醒](../../core/clients/deploy/configure-wake-on-lan.md)。  

    - **允許計量付費網際網路連線上的用戶端在安裝期限之後下載內容 (可能會產生額外費用)**  

    > [!NOTE]  
    > 當您部署套件和程式時，無法選取 [將軟體預先部署至使用者的主要裝置]  。  

6. 在 [排程]  頁面中，設定何時將此套件和程式部署到用戶端裝置。  

    這個頁面上的選項會因您將部署動作設定為 [可用]  或 [必要]  而有所不同。  

    針對 [必要]  部署，請從 [重新執行行為]  下拉式功能表中設定程式的重新執行行為。 選擇下列選項：  

    | 重新執行行為 | 說明 |
    |----------------|-------------|
    | **絕不重新執行已部署的程式** | 用戶端不會重新執行程式。 即使程式原本已失敗或程式檔案變更，仍會發生此行為。 |
    | **永遠重新執行程式** | 部署排程後，用戶端一律會重新執行此程式。 即使程式已經成功執行，還是會發生此行為。 當更新程式時，週期性部署非常適合。 |
    | **如果先前嘗試失敗則重新執行** | 只有當已排程的部署在先前嘗試執行失敗時，用戶端才會重新執行程式。 |
    | **如果先前嘗試時成功則重新執行** | 程式只有過去曾在用戶端上成功執行後，用戶端才會重新執行程式。 當定期更新程式且每次更新都需要成功安裝前次更新時，此行為十分適合週期性部署。 |

7. 在 [使用者經驗]  頁面上，指定下列資訊：  

    - **允許使用者不論指派均執行程式**：使用者可以從 [軟體中心] 中安裝這個軟體，而不論任何排程的安裝時間。  

    - **軟體安裝**：允許在任何已設定的維護視窗以外的時間安裝軟體。  

    - **系統重新啟動 (如果是完成安裝所需)** ：如果軟體安裝需要重新啟動裝置才能完成，允許在任何已設定的維護期間以外的時間執行此動作。  

    - **Embedded 裝置**：當您將套件和程式部署到已啟用寫入篩選器的 Windows Embedded 裝置時，您可以指定它們在暫時重疊上安裝套件和程式，並於稍後再認可變更。 或者，在安裝期限或維護期間認可變更。 當您在安裝期限或維護期間認可變更時，需要重新啟動裝置才能保存裝置的變更。  

        > [!NOTE]  
        > 當您部署的封裝或程式到 Windows Embedded 裝置時，請確定裝置已設定的維護視窗集合的成員。 如需如何利用維護時段，將應用程式部署至 Windows Embedded 裝置的詳細資訊，請參閱[建立 Windows Embedded 應用程式](../get-started/creating-windows-embedded-applications.md)。  

8. 在 [發佈點]  頁面上，指定下列資訊：  

    - **部署選項**：指定用戶端在其目前界限群組中使用發佈點時的動作。 另請選取當用戶端從鄰近界限群組或預設站台界限群組使用發佈點時的動作。

        > [!IMPORTANT]  
        > 如果部署選項設定為 [從發佈點執行程式]  ，請務必啟用套件屬性 [資料存取]  索引標籤上的 [將此套件中的內容複製到發佈點上的套件共用]  選項。 否則，無法從發佈點執行套件。  

    - **允許用戶端從預設站台界限群組使用發佈點**：當目前或鄰近界限群組中的任何發佈點都沒有內容可用時，可啟用此選項讓用戶端嘗試站台預設界限群組中的發佈點。

9. 完成精靈。  

選取部署時，即可在 [監視]  工作區的 [部署]  節點以及套件部署索引標籤的詳細資料窗格中檢視部署。 如需詳細資訊，請參閱[監視套件和程式](#monitor-packages-and-programs)。  


## <a name="monitor-packages-and-programs"></a>監視套件和程式

若要監視套件和程式部署，請使用用來監視應用程式的相同程序 (如[監視應用程式](monitor-applications-from-the-console.md)中所述)。  

套件和程式也包含數份內建報告，可讓您監視套件和程式部署狀態的相關資訊。 這些報表都有的報表類別目錄 **軟體散發 – 套件和程式** 和 **軟體散發 – 套件和程式的部署狀態**。  

如需如何在 Configuration Manager 中設定報告的詳細資訊，請參閱[報告簡介](../../core/servers/manage/introduction-to-reporting.md)。  


## <a name="manage-packages-and-programs"></a>管理套件和程式

在 [軟體程式庫]  工作區中，展開 [應用程式管理]  ，然後選取 [套件]  節點。 選取所要管理的套件，然後選擇管理工作。  

### <a name="create-prestage-content-file"></a>建立預先設置的內容檔案

開啟 [建立預先設置的內容檔案精靈]  ，以建立包含套件內容的檔案。 使用此檔案，將套件手動匯入至遠端發佈點。 當站台伺服器與發佈點之間的網路頻寬偏低時，這個動作很有用。

### <a name="create-program"></a>建立程式

開啟 [建立程式精靈]  ，為此套件建立新程式。

### <a name="export"></a>匯出

開啟 [匯出套件精靈]  ，將選取的套件和其內容匯出至檔案。 使用此檔案將檔案匯入至另一個階層。

如需如何匯入套件和程式的資訊，請參閱[建立套件和程式](#create-a-package-and-program)。

### <a name="deploy"></a>部署

開啟 [部署軟體精靈]  ，將選取的封裝和程式部署到集合。 如需詳細資訊，請參閱[部署套件和程式](#deploy-packages-and-programs)。

### <a name="distribute-content"></a>發佈內容

開啟 [發佈內容精靈]  ，以將套件和程式內容傳送至所選發佈點或發佈點群組。

### <a name="update-distribution-points"></a>更新發佈點

使用所選取封裝和程式的最新內容來更新發佈點。


## <a name="see-also"></a>請參閱

- [指令碼](create-deploy-scripts.md)

- [套件轉換管理員](../pcm/package-conversion-manager.md)

- [套件定義檔](package-definition-files.md)
