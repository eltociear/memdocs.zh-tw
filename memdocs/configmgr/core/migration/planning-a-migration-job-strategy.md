---
title: 移轉作業規劃
titleSuffix: Configuration Manager
description: 使用移轉作業設定您要移轉至 Configuration Manager 最新分支環境中的資料。
ms.date: 10/06/2016
ms.prod: configuration-manager
ms.technology: configmgr-core
ms.topic: conceptual
ms.assetid: a70bfbd4-757a-4468-9312-1c3b373ef9fc
author: aczechowski
ms.author: aaroncz
manager: dougeby
ms.openlocfilehash: 87aac20a2ac70e843bf17982375c92804de2b20e
ms.sourcegitcommit: bbf820c35414bf2cba356f30fe047c1a34c5384d
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/21/2020
ms.locfileid: "81702846"
---
# <a name="plan-a-migration-job-strategy-in-configuration-manager"></a>規劃 Configuration Manager 中的移轉作業策略

適用於：  Configuration Manager (最新分支)

使用移轉作業設定您要移轉至 Configuration Manager 最新分支環境中的特定資料。 移轉作業可識別您要移轉的物件，而且會在目的地階層中的頂層站台執行。 您可以在每個來源站台上設定一項或多項移轉作業。 這可讓您一次移轉所有物件，或是在每項作業中移轉有限的資料子集。  

 在 Configuration Manager 從來源階層的一或多個站台成功收集資料後，即可建立移轉作業。 您可以依照任意順序從收集資料的來源站台移轉資料。 若是 Configuration Manager 2007 來源站台，您只能從建立物件所在的站台移轉資料。 若是執行 System Center 2012 Configuration Manager 或更新版本的來源站台，則可移轉的所有資料都在來源階層的頂層站台上。  

 您在各階層之間移轉用戶端之前，請先確定用戶端使用的物件已移轉，且這些物件都在目的地階層中。 例如，當您從 Configuration Manager 2007 SP2 來源階層移轉時，可能有部署至包含用戶端之自訂集合的內容公告。 在此案例中，建議您在移轉用戶端之前移轉集合、公告和相關聯內容。 如果內容、集合和公告未在用戶端移轉之前移轉，此資料就無法與目的地階層中的用戶端建立關聯。 如果用戶端未與之前執行的公告和內容相關的資料產生關聯，用戶端就可能收到要在目的地階層中安裝的內容，但該內容並非必要。 若用戶端在資料移轉之後移轉，用戶端就會與此資料和公告產生關聯，而除非公告為週期性，否則就不會再收到已移轉公告的此內容。  

 某些物件不僅需要從來源階層移轉資料至目的地階層。 例如，若要將用戶端的軟體更新成功移轉至目的地階層，您必須在目的地階層中部署主動式軟體更新點、設定產品的類別目錄，以及同步處理軟體更新點與 Windows Server Update Services (WSUS)。  

##  <a name="types-of-migration-jobs"></a><a name="Types_of_Migration"></a> 移轉作業類型  
 Configuration Manager 支援下列移轉作業類型。 每一種作業類型的設計都是幫助您定義可包含在該作業內的物件。  

 **集合移轉** (僅在從 Configuration Manager 2007 SP2 移轉時才支援)：移轉與您所選擇集合相關的物件。 根據預設，集合移轉包括與集合成員相關聯的所有物件。 當您使用集合移轉作業時，可以排除特定物件執行個體。  

 **物件移轉**：移轉您選取的個別物件。 您只選取要移轉的特定資料。  

 **移轉之前已移轉的物件**：移轉您之前已移轉的物件 (當這些物件自上一次移轉後，在來源階層中有所更新時移轉)。  

###  <a name="objects-that-you-can-migrate"></a><a name="Objects_that_can_migrate"></a> 可移轉的物件  
 特定移轉作業類型不一定能夠移轉每一個物件。 下列清單識別每一種移轉作業類型可移轉的物件類型。  

> [!NOTE]  
>  集合移轉作業只有在您從 Configuration Manager 2007 SP2 來源階層移轉物件時才可使用。  

 **您可以用來移轉每個物件的作業類型**  

-   **公告** (可從支援的 Configuration Manager 2007 來源站台移轉)  

    -   集合移轉  


-   **Asset Intelligence 類別目錄**  

    -   物件移轉  

    -   移轉之前已移轉的物件  

-   **Asset Intelligence 硬體需求**  

    -   物件移轉  

    -   移轉之前已移轉的物件  

-   **Asset Intelligence 軟體清單**  

    -   物件移轉  

    -   移轉之前已移轉的物件  

-   **界限**  

    -   物件移轉  

    -   移轉之前已移轉的物件  

-   **設定基準**  

    -   集合移轉  

    -   物件移轉  

    -   移轉之前已移轉的物件  

-   **設定項目**  

    -   集合移轉  

    -   物件移轉  

    -   移轉之前已移轉的物件  

-   **維護期間**  

    -   集合移轉  


-   **作業系統部署開機映像**  

    -   集合移轉  

    -   物件移轉  

    -   移轉之前已移轉的物件  

-   **作業系統部署驅動程式套件**  

    -   集合移轉  

    -   物件移轉  

    -   移轉之前已移轉的物件  

-   **作業系統部署驅動程式**  

    -   集合移轉  

    -   物件移轉  

    -   移轉之前已移轉的物件  

-   **作業系統部署映像**  

    -   集合移轉  

    -   物件移轉  

    -   移轉之前已移轉的物件  

-   **作業系統部署套件**  

    -   集合移轉  

    -   物件移轉  

    -   移轉之前已移轉的物件  

-   **軟體發佈套件**  

    -   集合移轉  

    -   物件移轉  

    -   移轉之前已移轉的物件  

-   **軟體計量規則**  

    -   物件移轉  

    -   移轉之前已移轉的物件  

-   **軟體更新部署套件**  

    -   集合移轉  

    -   物件移轉  

    -   移轉之前已移轉的物件  

-   **軟體更新部署範本**  

    -   集合移轉  

    -   物件移轉  

    -   移轉之前已移轉的物件  

-   **軟體更新部署**  

    -   集合移轉  


-   **軟體更新清單**  

    -   物件移轉  

    -   移轉之前已移轉的物件  

-   **工作順序**  

    -   集合移轉  

    -   物件移轉  

    -   移轉之前已移轉的物件  

-   **虛擬應用程式套件**  

    -   集合移轉  

    -   物件移轉  

    > [!IMPORTANT]  
    >  雖然您可以使用物件移轉來移轉虛擬應用程式套件，但是無法使用 [移轉之前已移轉物件]  移轉作業類型進行移轉。 您必須從目的地站台刪除已移轉的虛擬應用程式套件，然後建立新的移轉作業來移轉虛擬應用程式。  

##  <a name="general-planning-for-all-migration-jobs"></a><a name="About_Migration_Jobs"></a> 所有移轉作業的一般規劃  
 使用 [建立移轉作業精靈] 建立移轉作業將物件移轉至您的目的地階層。 您建立的移轉作業類型會決定可移轉的物件。 您可以建立並使用多項移轉作業從相同的來源站台或多個來源站台移轉資料。 使用某一種類型的移轉作業並不會阻止您使用另一種類型的移轉作業。  

 成功執行移轉作業後，其狀態會列出為 [已完成]  且無法再次執行。 不過，您可以建立新的移轉作業來移轉原始作業所移轉的任何物件，而且新的移轉作業也可包含其他物件。 當您建立其他移轉作業時，之前已移轉物件的狀態會顯示為 [已移轉]  。 您可以選取這些物件並再次移轉，但除非物件已在來源階層中更新，否則不需要再次移轉這些物件。 如果物件最初移轉後已在來源階層中更新，當您使用移轉作業類型 [移轉後修改的物件]  時可以識別該物件。  

 您可以在移轉作業執行之前將它刪除。 不過，移轉作業完成後，仍會在 Configuration Manager 主控台中顯示且無法刪除。 每一項已完成或尚未執行的移轉作業，都會繼續在 Configuration Manager 主控台中顯示，直到您完成移轉程序並清理移轉資料。  

> [!NOTE]  
>  在您使用 [清理移轉資料]  動作完成移轉後，可以重新設定相同的階層作為目前的來源階層，以便再次顯示您之前移轉的物件。  

 在 Configuration Manager 主控台中選取移轉作業，然後選擇 [作業中的物件]  索引標籤，即可檢視任何移轉作業中包含的物件。  

 使用以下各節中的資訊可幫助您規劃所有移轉作業。  

### <a name="data-selection"></a>選取資料  
 當您建立集合移轉作業時，必須選取一個或多個集合。 選取集合後，[建立移轉作業精靈] 就會顯示與集合相關聯的物件。 根據預設，與所選取集合相關聯的所有物件都會移轉，但是您可以取消核取不想要隨該作業移轉的物件。 如果您取消核取的物件有相依物件，這些相依物件也會一併取消核取。 所有取消核取的物件都會新增至排除清單中。 排除清單上的物件會從未來移轉作業的自動選取範圍內移除。 您必須手動編輯排除清單，才能將您要在未來建立的移轉作業中自動選取進行移轉的物件移除。  

### <a name="site-ownership-for-migrated-content"></a>已移轉內容的站台擁有權  
 當您移轉部署的內容時，必須將內容物件指派至目的地階層中的站台。 此站台就會變成目的地階層中該內容的擁有者。 雖然目的地階層的頂層站台是實際移轉內容中繼資料的站台，但它會是跨網路存取內容之原始來源檔案的指派站台。  

 若要盡可能減少移轉期間使用的網路頻寬，請考慮將內容的擁有權傳送至最近的可用站台。 由於與內容相關的資訊會在 Configuration Manager 中全域共用，因此每個站台都可以使用。  

 使用資料庫複寫，即可在目的地階層的所有站台上共用內容相關資訊。 不過，您指派至主要站台，然後部署到其他主要站台發佈點的內容仍會使用以檔案為基礎的複寫來傳輸。 這項傳輸是透過管理中心網站路由傳送至其他各主要站台。 在您將站台指派為內容擁有者時，藉由移轉前或移轉期間，將您規劃發佈至多個主要站台的套件集中化，就能降低資料傳輸量，使用較低的網路頻寬。  

### <a name="role-based-administration-security-scopes-for-migrated-data"></a>已移轉資料的以角色為基礎的系統管理安全性範圍  
 您將資料移轉至目的地階層時，必須將一個或多個以角色為基礎的系統管理安全性範圍指派至其資料已移轉的物件。 這樣可確保只有適當的系統管理使用者可在移轉後存取此資料。 您指定的安全性範圍是由移轉作業定義，並且會套用至該作業所移轉的每個物件。 如果您需要將不同的安全性範圍套用至不同的物件集合，而且想要在移轉期間指派這些範圍，則必須使用不同的移轉作業移轉不同的物件集合。  

 在您設定移轉作業之前，請先檢閱以角色為基礎的系統管理如何在 Configuration Manager 中運作。 必要時，為您移轉的資料設定一或多個安全性範圍，以控制哪些人員可存取目的地階層中的已移轉物件。  

 如需安全性範圍與以角色為基礎之系統管理的詳細資訊，請參閱 [Configuration Manager 以角色為基礎之系統管理的基礎](../../core/understand/fundamentals-of-role-based-administration.md)。  

### <a name="review-migration-actions"></a>檢閱移轉動作  
 當您設定移轉作業時，[建立移轉作業精靈] 會顯示確保移轉成功所需採取之動作的清單，以及 Configuration Manager 在移轉所選取資料期間所採取動作的清單。 請詳細檢閱這項資訊，以確保獲得預期的結果。  

### <a name="schedule-migration-jobs"></a>排定移轉作業  
 根據預設，移轉作業會在建立之後立即執行。 不過，您可以在建立作業時或藉由編輯作業的內容，指定何時執行移轉作業。 您可以如下排定執行移轉作業：  

-   立即執行作業  

-   於特定開始時間執行作業  

-   不執行作業  

### <a name="specify-conflict-resolution-for-migrated-data"></a>指定移轉之資料的衝突解決方式  
 根據預設，除非您設定移轉作業略過或覆寫之前已移轉至目的地資料庫資料，否則移轉作業不會覆寫目的地資料庫中的資料。  

##  <a name="plan-for-collection-migration-jobs"></a><a name="About_Collection_Migration"></a> 規劃集合移轉作業  
 集合移轉作業僅適用於從來源階層 (執行支援的 Configuration Manager 2007 版本) 移轉資料。 依集合進行移轉時，請指定一個或多個要進行移轉的集合。 對於您指定的每個集合，移轉作業會自動選取所有相關的物件以進行移轉。 例如，若您選取特定的使用者集合，將識別其集合成員以供您移轉與該集合相關聯的部署。 或者，您也可以選取其他與該成員相關聯的部署物件來進行移轉。 此處選取的所有項目都會新增到可移轉的物件清單中。  

 當您移轉集合時，Configuration Manager 會同時移轉集合設定，包括維護期間和集合變數，但無法移轉用於 AMT 用戶端佈建的集合設定。  

 使用以下各節的資訊來瞭解其他設定，以套用至以集合為基礎的移轉作業。  

### <a name="exclude-objects-from-collection-migration-jobs"></a>從集合移轉作業排除物件  
 您可以從集合移轉作業中排除特定物件。 當您從集合移轉作業中排除特定物件時，該物件會新增至全域排除清單，清單包含從目前來源階層內任何來源站台所建立移轉作業中排除的所有物件。 排除清單中的物件仍可在未來作業中進行移轉，不過當您建立以集合為基礎的新移轉作業時，這些物件不會自動包含在其中。  

 您可以編輯排除清單以移除之前排除的物件。 由排除清單移除物件之後，若您在新移轉作業建立期間選取與該物件相關聯的集合，該物件也會自動選取。  

### <a name="unsupported-collections"></a>不支援的集合  
 Configuration Manager 可從 Configuration Manager 2007 來源階層移轉任何預設使用者集合、裝置集合與多數自訂集合。 不過，若集合中同時包含使用者和裝置，Configuration Manager 無法移轉該集合。  

 無法移轉下列集合︰  

-   包含使用者和裝置的集合。  

-   包含不同資源類型集合參照的集合。 例如某個以裝置為基礎的集合，集合中包含以使用者為主的集合之子集合或連結。 在此範例中，僅會移轉頂層集合。  

-   會依規則加入未知電腦的集合。 該集合會進行移轉，但將未知電腦加入的規則將無法進行移轉。  

### <a name="empty-collections"></a>空集合  
 空集合意指沒有任何相關聯資源的集合。 Configuration Manager 移轉空集合時，會將該集合轉換成組織資料夾，但資料中不包含任何使用者或裝置。 這個資料夾將建立於 Configuration Manager 主控台之 [資產與相容性]  工作區的 [使用者集合]  或 [裝置集合]  節點下，並以該空集合的名稱來建立。  

### <a name="linked-collections-and-subcollections"></a>連結的集合與子集合  
 當您移轉已連結至其他集合或擁有子集合的集合時，除了連結的集合與子集合以外，Configuration Manager 會同時在 [使用者集合]  或 [裝置集合]  節點下建立一個資料夾。  

### <a name="collection-dependencies-and-include-objects"></a>集合相依性與包含物件  
 當您在 [建立移轉作業精靈] 中指定要移轉的集合時，系統將自動選取任何相依的集合以包含到移轉作業中。 此行為可確保在移轉之後所有必要的資源仍可使用。  

 例如：您為執行 Windows 10 的裝置選取集合，該集合命名為 **Win_10**。 此集合僅限於包含您所有用戶端作業系統的集合，且該集合命名為 **All_Clients**。 將自動選取集合 **All_Clients** 以用於移轉作業。  

### <a name="collection-limiting"></a>集合限制  
 使用 Configuration Manager 最新分支時，集合會是全域資料，且會在階層中的每個站台進行評估。 因此，請規劃在移轉之後，要如何限制集合範圍。 您可於移轉期間先從目的地階層找出集合來使用，以限制該集合的移轉後範圍，避免移轉後的集合包含非預期的成員。  

 例如，在 Configuration Manager 2007 中，將於建立集合的所在站台與子站台上為集合進行評估。 公告可能僅會部署至子站台，如此便可將該公告的範圍限制於該子站台。 相較之下，Configuration Manager 最新分支集合則會在每個站台進行評估，之後才會為每個站台評估相關聯的公告。 集合限制可供您依據另一個集合來縮小集合成員，以避免加入非預期的集合成員。  

### <a name="site-code-replacement"></a>站台碼取代  
 若您要移轉的集合包含可識別 Configuration Manager 2007 站台的準則，則必須在目的地階層中指定特定的站台。 如此可確保移轉後的集合在目的地階層中仍可運作，且其範圍不會變大。  

### <a name="specify-behavior-for-migrated-advertisements"></a>指定移轉後公告的行為  
 根據預設，依集合進行的移轉作業會停用移轉至目的地階層的公告。 其包含與公告相關聯的任何程式。 若您建立以集合為基礎且其中包含公告的移轉作業，則可在 [建立移轉作業精靈] 的 [設定]  頁面上，看到 [Enable programs for deployment in Configuration Manager after an advertisement is migrated (在公告移轉後啟用 Configuration Manager 部署程式)]  選項。 若您選取此選項，將在移轉後啟用與公告相關聯的程式。 最佳作法是不要選取此選項。 而是在完成移轉後驗證要接收這些程式的用戶端，再啟用這些程式。  

> [!NOTE]  
>  只有在您建立以集合為基礎的移轉作業且其中包含公告時，才會看到 [Enable programs for deployment in Configuration Manager after an advertisement is migrated]\(在公告移轉後啟用 Configuration Manager 部署程式)  選項。  

 若要在移轉後啟用程式，請在程式內容的 [進階]  索引標籤上清除 [Disable this program on computers where it is advertised]\(在程式公告所在電腦上停用該程式)  。  

##  <a name="plan-for-object-migration-jobs"></a><a name="About_Object_Migration"></a> 規劃物件移轉作業  
 有別於集合移轉，您必須選取要移轉的每個物件和物件執行個體。 您可以選取個別物件 (例如從 Configuration Manager 2007 階層選取公告，或從 System Center 2012 Configuration Manager 或 Configuration Manager 最新分支階層選取發行)，以新增至特定移轉作業的移轉物件清單。 物件移轉作業不會將任何未新增到移轉清單的物件移轉到目的地站台。  

 除了適用於所有移轉作業的設定之外，以物件為基礎的移轉作業沒有其他任何要規劃的設定。  

##  <a name="plan-for-previously-migrated-object-migration-jobs"></a><a name="About_Object_Migrations"></a> 規劃先前移轉的物件移轉作業  
 若已移轉至目的地階層的物件在來源階層中有更新，您可使用 [移轉後已修改的物件]  作業類型再次移轉該物件。 例如，若您在來源階層針對套件來源檔案進行重新命名或更新，該套件在來源階層中的版本會遞增。 套件版本遞增後，該套件便可依此作業類型識別以進行移轉。  

 此作業類型與物件移轉類型相似，除了前者在選取要移轉的物件時，可選取的物件僅限於在先前移轉作業移轉後有更新的物件。   

 當您選取此作業類型時，[建立移轉作業精靈] 之 [設定]  頁面上的衝突解決行為，會設定為覆寫先前移轉的物件。 您無法變更這項設定。  

> [!NOTE]  
>  此移轉作業可識別由來源階層自動更新的物件以及由系統管理使用者更新的物件。  
